create database QLCHXM;
use QLCHXM;
CREATE TABLE XEMAY (
    MAXE VARCHAR(10) PRIMARY KEY,
    TENXE NVARCHAR(100),
    HANGXE NVARCHAR(50),
    GIABAN DECIMAL(18,0),
    SOLUONG INT,
);
CREATE TABLE KHACHHANG (
    MAKH VARCHAR(10) PRIMARY KEY,
    HOTEN NVARCHAR(100),
    SDT VARCHAR(15),
    DIACHI NVARCHAR(200),
	TENDANGNHAP VARCHAR(50) UNIQUE,
    MATKHAU VARCHAR(100),
);
CREATE TABLE NHANVIEN (
    MANV VARCHAR(10) PRIMARY KEY,
    HOTEN NVARCHAR(100),
    NGAYSINH DATE,
    GIOITINH NVARCHAR(10),
    SODIENTHOAI VARCHAR(15),
    DIACHI NVARCHAR(200),
    CHUCVU NVARCHAR(50),
    TENDANGNHAP VARCHAR(50) UNIQUE,
    MATKHAU VARCHAR(100),
    QUYEN NVARCHAR(20),
);
CREATE TABLE DONHANG (
    MADH VARCHAR(10) PRIMARY KEY,
    NGAYLAP DATE,
    MAKH VARCHAR(10),
	DIACHI NVARCHAR(200),
    TONGTIEN DECIMAL(18,0),
	TRANGTHAI VARCHAR(50),
    FOREIGN KEY (MAKH) REFERENCES KHACHHANG(MAKH)
);
CREATE TABLE HOADON (
    MAHD VARCHAR(10) PRIMARY KEY,
    NGAYLAP DATE,
    MAKH VARCHAR(10),
    MANV VARCHAR(10),
    TONGTIEN DECIMAL(18,0),
    FOREIGN KEY (MAKH) REFERENCES KHACHHANG(MAKH),
    FOREIGN KEY (MANV) REFERENCES NHANVIEN(MANV)
);
CREATE TABLE CHITIETHOADON (
    MAHD VARCHAR(10),
    MAXE VARCHAR(10),
    SOLUONG INT,
    DONGIA DECIMAL(18,0),
	THANHTIEN DECIMAL(18,0),
    PRIMARY KEY (MAHD, MAXE),
    FOREIGN KEY (MAHD) REFERENCES HOADON(MAHD),
    FOREIGN KEY (MAXE) REFERENCES XEMAY(MAXE),
);
CREATE TABLE NHACUNGCAP (
    MANCC VARCHAR(10) PRIMARY KEY,
    TENNCC NVARCHAR(100),
    DIACHI NVARCHAR(200),
    SODIENTHOAI VARCHAR(15),
);
CREATE TABLE PHIEUNHAP (
    MAPN VARCHAR(10) PRIMARY KEY,
    NGAYNHAP DATE,
    MANV VARCHAR(10),
    MANCC VARCHAR(10),
    TONGTIEN DECIMAL(18,0),
    FOREIGN KEY (MANV) REFERENCES NHANVIEN(MANV),
    FOREIGN KEY (MANCC) REFERENCES NHACUNGCAP(MANCC)
);
CREATE TABLE CHITIETPHIEUNHAP (
    MAPN VARCHAR(10),
    MAXE VARCHAR(10),
    SOLUONG INT,
    DONGIA DECIMAL(18,0),
	THANHTIEN DECIMAL(18,0),
    PRIMARY KEY (MAPN, MAXE),
    FOREIGN KEY (MAPN) REFERENCES PHIEUNHAP(MAPN),
    FOREIGN KEY (MAXE) REFERENCES XEMAY(MAXE),
);
/*CREATE TABLE BAOHANH (
    MABH VARCHAR(10) PRIMARY KEY,          
    MAHD VARCHAR(10),                       
    MAXE VARCHAR(10),                      
    NGAYBATDAU DATE,                      
    NGAYKETTHUC DATE,                                         
    FOREIGN KEY (MAHD) REFERENCES HOADON(MAHD),
    FOREIGN KEY (MAXE) REFERENCES XEMAY(MAXE)
);*/


INSERT INTO XEMAY (MAXE, TENXE, HANGXE, GIABAN, SOLUONG) VALUES
('XM001', N'Wave Alpha 110cc', N'Honda', 18000000, 10),
('XM002', N'Sirius Fi', N'Yamaha', 21000000, 5),
('XM003', N'Vision 2023', N'Honda', 35000000, 8);

INSERT INTO KHACHHANG (MAKH, HOTEN, SDT, DIACHI, TENDANGNHAP, MATKHAU) VALUES
('KH001', N'Nguyễn Văn A', '0912345678', N'Hà Nội', 'nguyenvana', '123456'),
('KH002', N'Trần Thị B', '0987654321', N'Hồ Chí Minh', 'tranthib', 'abcdef'),
('KH003', N'Lê Văn C', '0909123456', N'Đà Nẵng', 'levanc', '112233');

INSERT INTO NHANVIEN (MANV, HOTEN, NGAYSINH, GIOITINH, SODIENTHOAI, DIACHI, CHUCVU, TENDANGNHAP, MATKHAU, QUYEN) VALUES
('NV001', N'Huỳnh Chí Văn', '2005-05-15', N'Nam', '0911222333', N'Lâm Đồng', N'Quản lý', 'huynhchivan', '123', 'ADMIN'),
('NV002', N'Nguyễn Thanh Hiệu', '2005-09-20', 'Nam', '0988111222', N'Hải Phòng', N'Nhân viên bán hàng', 'nguyenthanhieu', '456', 'NHANVIENBANHANG'),
('NV003', N'Nguyễn Thanh Văn', '2005-12-01', N'Nam', '0909111222', N'Nam Định', N'Nhân viên kho', 'nguyenthanhvan', '789', 'NHANVIENKHO');

INSERT INTO HOADON (MAHD, NGAYLAP, MAKH, MANV, TONGTIEN) VALUES
('HD001', '2025-04-17', 'KH001', 'NV002', 18000000),
('HD002', '2025-04-17', 'KH002', 'NV002', 21000000),
('HD003', '2025-04-17', 'KH003', 'NV002', 35000000);

INSERT INTO CHITIETHOADON (MAHD, MAXE, SOLUONG, DONGIA, THANHTIEN) VALUES
('HD001', 'XM001', 1, 18000000, 18000000),
('HD002', 'XM002', 1, 21000000, 21000000),
('HD003', 'XM003', 1, 35000000, 35000000);

INSERT INTO NHACUNGCAP (MANCC, TENNCC, DIACHI, SODIENTHOAI) VALUES
('NCC001', N'Công ty Honda Việt Nam', N'Hà Nội', '02263888888'),
('NCC002', N'Công ty Yamaha Motor', N'Đà Nẵng', '02263999999'),
('NCC003', N'Công ty SYM Việt Nam', N'Bình Dương', '02743939393');

INSERT INTO PHIEUNHAP (MAPN, NGAYNHAP, MANV, MANCC, TONGTIEN) VALUES
('PN001', '2025-03-15', 'NV001', 'NCC001', 54000000),
('PN002', '2025-03-18', 'NV001', 'NCC002', 63000000),
('PN003', '2025-03-20', 'NV003', 'NCC003', 35000000);

INSERT INTO CHITIETPHIEUNHAP (MAPN, MAXE, SOLUONG, DONGIA, THANHTIEN) VALUES
('PN001', 'XM001', 3, 18000000, 54000000),
('PN002', 'XM002', 3, 21000000, 63000000),
('PN003', 'XM003', 1, 35000000, 35000000);

INSERT INTO BAOHANH (MABH, MAHD, MAXE, NGAYBATDAU, NGAYKETTHUC) VALUES
('BH001', 'HD001', 'XM001', '2025-04-17', '2026-04-17'),
('BH002', 'HD002', 'XM002', '2025-04-17', '2026-04-17'),
('BH003', 'HD003', 'XM003', '2025-04-17', '2027-04-17');











